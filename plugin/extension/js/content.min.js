!function e(o,t,n){function a(i,l){if(!t[i]){if(!o[i]){var d="function"==typeof require&&require;if(!l&&d)return d(i,!0);if(r)return r(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[i]={exports:{}};o[i][0].call(c.exports,function(e){var t=o[i][1][e];return a(t?t:e)},c,c.exports,e,o,t,n)}return t[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,o,t){o.exports={keyCodes:{49:1,50:2,51:3,52:4,53:5},songTypes:{Dirty:[0,/^Dirty$/],Clean:[1,/^Clean$/],Inst:[2,/^Inst$/],Acap:[3,/^Acap/],Main:[4,/^Main$/],"Intro - Dirty":[5,/^Intro - Dirty$/],"Intro - Clean":[6,/^Intro - Clean$/]},disabledURLs:["http://www.djcity.com/","http://www.djcity.com/#","http://www.djcity.com/default.aspx","http://www.djcity.com/digital/record-pool.aspx","http://www.djcity.com/charts/","http://www.djcity.co.uk/","http://www.djcity.co.uk/#","http://www.djcity.co.uk/default.aspx","http://www.djcity.co.uk/digital/record-pool.aspx","http://www.djcity.co.uk/charts/"],options:{autorate:!1,rating:5,downloadToggle:!1,downloadType:"Dirty",downloadedSongs:{},displayOverlay:!1,downloadValue:0,playing:!1,actionsAllowed:!0}}},{}],2:[function(e,o,t){arguments[4][1][0].apply(t,arguments)},{dup:1}],3:[function(e,o,t){var n=e("./config"),a=e("./config").options,r=e("./helpers/links"),i=e("./helpers/overlay"),l=e("./helpers/managesongs");chrome.storage.local.get(["autorate","rating","downloadToggle","downloadType","downloadedSongs","displayOverlay"],function(e){for(var o in e)a[o]=e[o]?e[o]:a[o];a.downloadValue=n.songTypes[a.downloadType][0],a.actionsAllowed=~n.disabledURLs.indexOf(window.location.href)?!1:!0}),chrome.storage.onChanged.addListener(function(e){e.autorate&&(e.autorate.newValue?a.autorate=!0:a.autorate=!1),e.rating&&(a.rating=e.rating.newValue),e.downloadToggle&&(e.downloadToggle.newValue?a.downloadToggle=!0:a.downloadToggle=!1),e.downloadType&&(a.downloadType=e.downloadType.newValue,a.downloadValue=n.songTypes[a.downloadType][0]),e.displayOverlay&&(a.displayOverlay=e.displayOverlay.newValue),i.create(a)}),$(function(){var e=$("#artist_details li:first div.artist_details"),o=$("#artist_details li:nth-child(3) div.artist_details"),t=$("#artist_details li:nth-child(3) div.artist_label"),d=$("input[type=text]"),s=(window.location.href,l.hasNotBeenDownloaded()),c="Thank you for your feedback on this track!  Enjoy the download!"===$("div h4").text(),u=!1,p=!1;$(document).width()>1300&&i.create(a),(!s||c)&&(p=!0),a.autorate&&(l.rate(a.rating),a.downloadToggle&&a.actionsAllowed&&s&&l.download(p)),r.create(e),"Featuring"===t.text()&&r.create(o),d.focus(function(){u=!0}),d.blur(function(){u=!1}),$(".searchArtist").click(function(e){e.preventDefault(),r.searchArtist($(this).text())}),$("body").keydown(function(e){if(!u){var o=n.keyCodes[e.keyCode];o&&a.actionsAllowed&&a.downloadToggle&&l.rate(o),68===e.keyCode&&a.actionsAllowed&&s&&l.download(p),80===e.keyCode&&l.playPause(),e.shiftKey===!0&&(38===e.keyCode&&(a.downloadValue=0===a.downloadValue?6:a.downloadValue-1,$("#dropdownDL").val(a.downloadValue).trigger("change")),40===e.keyCode&&(a.downloadValue=6===a.downloadValue?0:a.downloadValue+1,$("#dropdownDL").val(a.downloadValue).trigger("change")))}}),$(window).resize(i.throttledResize),$("#dropdownDL").val(a.downloadValue).attr("selected","selected")})},{"./config":2,"./helpers/links":4,"./helpers/managesongs":5,"./helpers/overlay":7}],4:[function(e,o,t){function n(e){return"<a href='"+e+"' class='searchArtist'>"+e+"</a>"}t.searchArtist=function(e){var o=$("input[type=text]"),t=$(".search_btn");o.val(e),t.click()},t.create=function(e){var o=e.text().replace(/\&/g,",").split(",").filter(function(e){return" "!==e}),t=o.length,a="<span>";o.forEach(function(e,o){a+=n(e.trim()),t-1!==o&&(2===t&&(a+=" & "),t>2&&(a+=", ",t-2===o&&(a+="& ")))}),a+="</span>",e.html(a)}},{}],5:[function(e,o,t){function n(e){var o=window.location.search;r.downloadedSongs[o].push(e),chrome.storage.local.set({downloadedSongs:r.downloadedSongs})}var a=e("../config").songTypes,r=e("../config").options,i=e("./messages");t.rate=function(e){var o=$("#ctl00_PageContent_submit");$('option[value="'+e+'"]').attr("selected","selected").parent().focus(),o.click(),rated=!0},t.playPause=function(){r.playing?(document.getElementsByClassName("jp-pause")[0].click(),r.playing=!1):(document.getElementsByClassName("jp-play")[0].click(),r.playing=!0)},t.download=function(e){var o=r.downloadType,t=$(".reviw_tdonw").length>0;if(t)if(e){var l=new RegExp(a[o][1]),d=$("#ad_sublisting li"),s=".float_left",c=".reviw_tdonw",u=!1;if(d.each(function(e,t){if($(this).find(s).text().match(l)){u=!0,$(this).find(c).children()[0].click(),n(o);var a=i.create("Song was downloaded successfully!","green");i.insert(a,!1)}}),!u){var p=o+" isn't an track option on this song! Try another option",w=i.create(p,"red");r.autorate&&r.downloadToggle?i.insert(w,!1):i.insert(w,!0)}}else{var w=i.create("You must rate the song before downloading","red");i.insert(w,!0)}},t.hasNotBeenDownloaded=function(){var e=window.location.search,o=r.downloadedSongs[e];if(o=o||[],o.indexOf(r.downloadType)>-1){var t=i.create("The "+r.type+" version of this song has already been downloaded by the extension","green");return i.insert(t,!1),!1}return!0}},{"../config":2,"./messages":6}],6:[function(e,o,t){var n=e("../Config").options;t.create=function(e,o){return"<div style='text-align:center' id='removeMe'><br /><p style='color:"+o+";font-size:15px;' id='message'>"+e+"</p></div>"},t.insert=function(e,o){var t=$("div.header_border_bottom:first");$("#message").length>0&&$("#removeMe").remove(),n.actionsAllowed&&(t.after(e),o&&setTimeout(function(){$("#removeMe").remove()},3e3))}},{"../Config":1}],7:[function(e,o,t){function n(e,o){var t="ON"===o?"#70AB8F":"#ff030d";return"<a href='#' id='"+e+"'' style='color:"+t+"'>"+o+"</a>"}function a(e){if($("#extensionOverlay").remove(),e.displayOverlay){var o="<select id='dropdownDL' style='background:transparent; color:white;'><option value='0'>Dirty</option><option value='1'>Clean</option><option value='2'>Inst</option><option value='3'>Acap</option><option value='4'>Main</option><option value='5'>Intro - Dirty</option><option value='6'>Intro - Clean</option></select>",t="<p>Autorate: ";t+=e.autorate?n("autorate","ON"):n("autorate","OFF"),t+="</p><p>1-Button Download: ",t+=e.downloadToggle?n("1btnDL","ON")+"<br> Track Type: "+o:n("1btnDL","OFF"),t+="</p>";var a="<div id='extensionOverlay' style='position:absolute; z-index:2147483647; color:white; font-family: GothamHTFBold; font-size: 12px'><div style='padding:0 0 0 5px;>'>"+t+"</div>";$("#container").prepend(a),$("#dropdownDL").val(e.downloadValue).attr("selected","selected"),$("#autorate").click(function(){chrome.storage.local.set({autorate:!e.autorate})}),$("#1btnDL").click(function(){chrome.storage.local.set({downloadToggle:!e.downloadToggle})}),$("#dropdownDL").change(function(){e.downloadType=$("#dropdownDL option:selected").text(),chrome.storage.local.set({downloadType:e.downloadType})})}}function r(){var e=$(document).width();1300>e?$("#extensionOverlay").remove():a(i)}var i=e("../config").options;t.create=a,t.throttledResize=function(){var e,o,t=75;return function(){var n=+new Date;e&&e+t>n?(clearTimeout(o),o=setTimeout(function(){e=n,r()},t)):(e=n,r())}}()},{"../config":2}]},{},[3]);